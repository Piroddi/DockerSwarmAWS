version: '3.3'
services:
  graphql-bff-server-api:
    build:
      context: ./graphql-bff
      dockerfile: Dockerfile
    ports:
      - '3002:3002'
    restart: on-failure
    container_name: graphql-bff-server-api
    environment:
      ORDERS_SERVICE_PORT: orders-api:3003
      PRODUCTS_SERVICE_PORT: products-api:3004
  orders-api:
    build:
      context: ./orders
      dockerfile: Dockerfile
    ports:
      - '3003:3003'
    restart: on-failure
    container_name: orders
  products-api:
    build:
      context: ./products
      dockerfile: Dockerfile
    ports:
      - '3004:3004'
    restart: on-failure
    container_name: products
